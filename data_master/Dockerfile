FROM postgres:14

ARG DB_USER
ARG DB_PASSWORD
ARG DB_HOST
ARG DB_PORT
ARG DB_DATABASE
ARG DB_REPL_USER
ARG DB_REPL_PASSWORD

ENV POSTGRES_USER=$DB_USER
ENV POSTGRES_PASSWORD=$DB_PASSWORD
ENV PG_HOST=$DB_HOST
ENV PG_PORT=$DB_PORT
ENV POSTGRES_DB=$DB_DATABASE
ENV DB_REPL_USER=$DB_REPL_USER
ENV DB_REPL_PASSWORD=$DB_REPL_PASSWORD

ENV PGDATA="/var/lib/postgresql/data/pgdata"

COPY ./init-database.sh /docker-entrypoint-initdb.d/
