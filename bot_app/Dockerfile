FROM python:3.8-alpine
WORKDIR /bot_app
COPY . .

ARG RM_HOST
ARG RM_PORT
ARG RM_USER
ARG RM_PASSWORD
ARG TOKEN

ARG DB_USER
ARG DB_PASSWORD
ARG DB_HOST
ARG DB_PORT
ARG DB_DATABASE

ENV SSH_HOST=$RM_HOST 
ENV SSH_PORT=$RM_PORT 
ENV SSH_USERNAME=$RM_USER 
ENV SSH_PASSWORD=$RM_PASSWORD 
ENV TG_TOKEN=$TOKEN

ENV PG_USER=$DB_USER
ENV PG_PASSWD=$DB_PASSWORD
ENV PG_HOST=$DB_HOST
ENV PG_PORT=$DB_PORT
ENV PG_DB=$DB_DATABASE

RUN apk add --no-cache gcc musl-dev linux-headers libpq-dev libffi-dev
RUN pip install -r requirements.txt

CMD ["python","bot.py"]
